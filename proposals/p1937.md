# Vector operations

<!--
Part of the Carbon Language project, under the Apache License v2.0 with LLVM
Exceptions. See /LICENSE for license information.
SPDX-License-Identifier: Apache-2.0 WITH LLVM-exception
-->

[Pull request](https://github.com/carbon-language/carbon-lang/pull/1937)

<!-- toc -->

## Table of contents

-   [Problem](#problem)
-   [Background](#background)
-   [Proposal](#proposal)
-   [Details](#details)
-   [Rationale](#rationale)
-   [Alternatives considered](#alternatives-considered)

<!-- tocstop -->

## Problem

Vector operations are actively used in HPC code for avoiding cycles over all
dimensions. It also helps not to think about leading dimensions: compiler knows
it internally. It is important for multidimensional arrays.

## Background

This idea is based on [array programming](https://en.wikipedia.org/wiki/Array_programming).

## Proposal

For avoiding loops (nested for multidimensional arrays), to use vector
operations having `vector o vector` and `vector o scalar`.

## Details

Arrays may be modified in scalar and vector ways.

1. Scalar way (`vector o vector`):
  ```carbon
    var x: [i32; 6] = (0, 1, 2, 3, 4, 5);
    // unary minus for vector x
    var y: auto = -x;
    // each to each elements are summarized
    var z: auto = x + y; // z = (0,0,0, 0,0,0)
  ```
  If shapes are inconsistent, runtime error is.

2. Vector way (`vector o scalar`):
  ```carbon
    var x: [i32; 6] = (0, 1, 2, 3, 4, 5);
    // multiply each element by 2
    x *= 2; // x = (0, 2, 4, 6, 8, 10);
  ```

Supported operations are the same as for basic types. Supported arrays are 1D
and multidimensional. Only leading dimension of nested arrays is supported.

## Rationale

It has an effect on
1.   [Performance-critical software](/docs/project/goals.md#performance-critical-software)
2.   [Code that is easy to read, understand, and write](/docs/project/goals.md#code-that-is-easy-to-read-understand-and-write)

## Alternatives considered

To have a `mutate` function which gets several arrays/scalars and lambda
expression/function modifying them.
